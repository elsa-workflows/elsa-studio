@page "/labels/{LabelId}"
@using Elsa.Studio.Labels.Models
@using Variant = MudBlazor.Variant
@inherits StudioComponentBase
@using Elsa.Studio.Workflows.Services
@inject ILocalizer Localizer

<PageTitle>@Localizer["Label"]</PageTitle>

<MudContainer MaxWidth="MaxWidth.False">
    <PageHeading Text="@($"Label: {_model.Name}")"/>

    <MudCard>
        <MudForm Model="@_model"
                 @ref="@_form"
                 Validation="@((Func<LabelInputModel, bool>)(x => _validator.Validate(x).IsValid))"
                 ValidationDelay="0">

            <MudTabs Border="false" PanelClass="pa-6">
                <MudTabPanel Text="@Localizer["General"]">
                    <MudStack Spacing="8">
                        <MudTextField @bind-Value="_model.Name"
                                      For="@(() => _model.Name)"
                                      Immediate="true"
                                      Label="@Localizer["Name"]"
                                      Variant="Variant.Outlined"
                                      HelperText="@Localizer["The name of the label."]"/>

                        <MudTextField @bind-Value="_model.Description"
                                      For="@(() => _model.Description)"
                                      Immediate="false"
                                      Label="@Localizer["Description"]"
                                      Variant="Variant.Outlined"
                                      HelperText="@Localizer["A description about the label."]"/>

                        <MudColorPicker @bind-Text="_model.Color"
                                        Label="@Localizer["Color"]"
                                        Variant="Variant.Outlined"
                                        HelperText="@Localizer["The color of the label."]" />
                    </MudStack>
                </MudTabPanel>
            </MudTabs>
        </MudForm>
        <MudCardActions>
            <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto" OnClick="@(async () => await OnSaveClicked())">@Localizer["Save"]</MudButton>
        </MudCardActions>
    </MudCard>
</MudContainer>