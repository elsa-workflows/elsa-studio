@using MudBlazor
@using Elsa.Studio.Models
@using Elsa.Api.Client.Expressions
@using Elsa.Api.Client.Models

@{
    var inputDescriptor = EditorContext.InputDescriptor;
    var displayName = inputDescriptor.DisplayName;
    var description = inputDescriptor.Description;
    var inputValue = (EditorContext.Value?.Expression as LiteralExpression)?.Value?.ToString() ?? string.Empty;
}

<MudTextField
    T="string"
    Label="@displayName"
    Variant="Variant.Outlined"
    HelperText="@description"
    Margin="Margin.Dense"
    Value="@inputValue"
    ValueChanged="HandleValueChanged"/>

@code {

    [Parameter]
    public DisplayInputEditorContext EditorContext { get; set; } = default!;

    private async Task HandleValueChanged(string newValue)
    {
        var input = EditorContext.Value ?? new ActivityInput();
        input.Expression = new LiteralExpression(newValue);
        await EditorContext.OnValueChanged.InvokeAsync(input);
    }

}