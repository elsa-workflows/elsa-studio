@using Elsa.Api.Client.Resources.ActivityDescriptors.Models
@using Elsa.Studio.Localization
@using Microsoft.JSInterop
@using Radzen.Blazor
@inject ILocalizer Localizer
@inject IDialogService DialogService

<style>
    .monaco-editor-container {
        height: 655px !important;
    }
</style>

<MudDialog>
    <TitleContent>
        <MudToolBar Dense="true" Gutters="false">
            <MudStack Spacing="0">
                <MudStack AlignItems=AlignItems.Center Row=true>
                    <MudText Typo="Typo.h5">@Label</MudText>
                    <MudText Typo="Typo.body2" Color="@Color.Info">@LanguageLabel</MudText>
                </MudStack>
                <MudText Typo="Typo.caption">@HelperText</MudText>
            </MudStack>
            <MudSpacer />
            @if (canSave)
            {
                <MudIconButton Icon="@Icons.Material.Outlined.Save" Size="Size.Medium" OnClick="OnSaveClicked" Color="@Color.Info" />
            }
            <MudIconButton Icon="@Icons.Material.Outlined.Close" Size="Size.Medium" OnClick="OnClosedClicked" />
        </MudToolBar>
    </TitleContent>
    <DialogContent>
        <MudPaper Height="668px" Width="100%" Elevation="0">
            <StandaloneCodeEditor @ref="_monacoEditor"
                                  Id="@_monacoEditorId"
                                  ConstructionOptions="ConfigureMonacoEditor"
                                  OnDidInit="OnMonacoInitializedAsync"
                                  OnDidChangeModelContent="OnMonacoContentChangedAsync"
                                  CssClass="studio-expression-input-monaco-editor" />
        </MudPaper>
    </DialogContent>
</MudDialog>